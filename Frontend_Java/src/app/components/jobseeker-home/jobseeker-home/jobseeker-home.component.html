<div class="container py-5">
  <div class="card border-0 shadow-lg overflow-hidden">
    <!-- Gradient Header with Improved Design -->
    <div class="card-header bg-gradient-primary text-white py-4 position-relative">
      <div class="d-flex justify-content-between align-items-center">
        <h3 class="mb-0 fw-bold">
          <i class="bi bi-person-badge me-2"></i>Job Seeker Profile
        </h3>
        <button class="btn btn-sm btn-light rounded-pill px-3" (click)="toggleEdit()" *ngIf="profile">
          <i class="bi" [class.bi-pencil]="!isEdit" [class.bi-x-lg]="isEdit"></i>
          {{ isEdit ? 'Cancel' : 'Edit' }}
        </button>
      </div>
    </div>

    <div class="card-body bg-light-subtle">
      <!-- Error Message -->
      <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible fade show rounded-3 mb-4" role="alert">
        <i class="bi bi-exclamation-triangle-fill me-2"></i>
        {{ errorMessage }}
        <button type="button" class="btn-close" (click)="errorMessage = ''"></button>
      </div>

      <!-- Profile Loaded -->
      <ng-container *ngIf="!loadingProfile && profile; else loading">
        <form>
          <!-- Profile Summary -->
          <div class="text-center mb-4">
            <div class="avatar-container position-relative mx-auto mb-3">
              <div class="avatar-circle bg-white shadow-sm">
                <i class="bi bi-person-circle text-gradient-primary" style="font-size: 60px;"></i>
              </div>
              <div *ngIf="isEdit" class="avatar-edit-icon">
                <i class="bi bi-camera-fill"></i>
              </div>
            </div>
            <h3 class="text-dark fw-bold mb-1">{{ profile.fullName }}</h3>
            <div class="badge bg-primary bg-opacity-10 text-primary rounded-pill px-3 py-1">
              <i class="bi bi-person-vcard me-1"></i> ID: {{ profile.id }}
            </div>
          </div>

          <!-- Form Fields -->
          <div class="row g-4">
            <div class="col-md-6">
              <div class="form-floating">
                <input type="text" class="form-control" id="fullName" [(ngModel)]="profile.fullName" 
                       [readonly]="!isEdit" name="fullName" placeholder="Full Name">
                <label for="fullName"><i class="bi bi-person me-2"></i>Full Name</label>
              </div>
            </div>

            <div class="col-md-6">
              <div class="form-floating">
                <input type="tel" class="form-control" id="phoneNumber" [(ngModel)]="profile.phoneNumber" 
                       [readonly]="!isEdit" name="phoneNumber" placeholder="Phone Number">
                <label for="phoneNumber"><i class="bi bi-telephone me-2"></i>Phone Number</label>
              </div>
            </div>

            <div class="col-md-6">
              <div class="form-floating">
                <input type="text" class="form-control" id="education" [(ngModel)]="profile.education" 
                       [readonly]="!isEdit" name="education" placeholder="Education">
                <label for="education"><i class="bi bi-mortarboard me-2"></i>Education</label>
              </div>
            </div>

            <div class="col-md-6">
              <div class="form-floating">
                <input type="text" class="form-control" id="experience" [(ngModel)]="profile.experience" 
                       [readonly]="!isEdit" name="experience" placeholder="Experience">
                <label for="experience"><i class="bi bi-briefcase me-2"></i>Experience</label>
              </div>
            </div>

            <div class="col-12">
              <div class="form-floating">
                <input type="text" class="form-control" id="resume" [(ngModel)]="profile.resume" 
                       [readonly]="!isEdit" name="resume" placeholder="Resume URL">
                <label for="resume"><i class="bi bi-file-earmark-text me-2"></i>Resume</label>
              </div>
            </div>

            <div class="col-12">
              <div class="form-floating">
                <input type="text" class="form-control" id="skills" [(ngModel)]="skillsInput" 
                       [readonly]="!isEdit" name="skills" placeholder="Skills">
                <label for="skills"><i class="bi bi-tools me-2"></i>Skills</label>
                <div class="form-text"><i class="bi bi-info-circle me-1"></i>e.g. Java, SQL</div>
              </div>
            </div>

            <!-- Skills Preview -->
            <div class="col-12" *ngIf="profile.skills?.length">
              <h6 class="fw-semibold mt-3"><i class="bi bi-tags me-2"></i>Your Skills:</h6>
              <div class="d-flex flex-wrap gap-2 mt-2">
                <span *ngFor="let skill of profile.skills" class="badge bg-primary bg-opacity-10 text-primary rounded-pill">
                  <i class="bi bi-check-circle me-1"></i>{{ skill }}
                </span>
              </div>
            </div>
          </div>

          <!-- Update Button -->
          <div *ngIf="isEdit" class="text-end mt-4 pt-3 border-top">
            <button type="button" class="btn btn-gradient-primary rounded-pill px-4" (click)="updateProfile()">
              <i class="bi bi-check-circle me-2"></i>Update Profile
            </button>
          </div>
        </form>
      </ng-container>

      <!-- Loading Placeholder -->
      <ng-template #loading>
        <div class="text-center py-5">
          <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <p class="text-muted mt-3">Loading profile...</p>
        </div>
      </ng-template>
    </div>
  </div>
</div>